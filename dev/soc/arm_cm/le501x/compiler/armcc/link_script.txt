#! armcc -E

#define FLASH_BASE 0x18000000
#define FLASH_BASE_USER 0x18036000
#define FLASH_SIZE 0x40000
#define FLASH_END (FLASH_BASE + FLASH_SIZE)
#define RAM_BASE 0
#define RAM_SIZE 0xc000
#define RAM_END (RAM_BASE + RAM_SIZE)

LR_FLASH FLASH_BASE_USER FLASH_SIZE{
    RAM_DATA_CODE RAM_BASE RAM_SIZE{
        *(RESET, +First)
        *(+RW)
        *(.xip_banned)
    }
    
    FLASH_CODE FLASH_BASE_USER+ImageLength(RAM_DATA_CODE) ALIGN 0x4{
        *(InRoot$$Sections)
        *(+RO)
    }
    ScatterAssert(ImageLimit(FLASH_CODE) <= FLASH_END)
    
    BSS ImageLimit(RAM_DATA_CODE) ALIGN 0x4
    {
        *(SECTION_RTT)
        *(+ZI)
    }
    HEAP_STACK +0 UNINIT
    {
        *(.reset_retain)
        *(HEAP)
        *(STACK)
    } 
    ScatterAssert(ImageLimit(HEAP_STACK)<=RAM_END)
}

.. _memory:

存储系统
============

Memory Map
-----------

+----------------+----------------------------+
| Runtime Memory | Range                      |
+================+============================+
| Flash          | 0x18000000 - 0x18080000    |
+----------------+----------------------------+
| SRAM           | 0x0000 - 0xC000            |
+----------------+----------------------------+


Flash
-------

+---------------------+---------------------------+--------------------------------+-------------------------------+
|         Section     | Start Offset              | End Offset                     | Size                          |
+=====================+===========================+================================+===============================+
| BLE PROTOCOL STACK  | __stack_lma__             | 0x80000                        | About 205KB                   |
+---------------------+---------------------------+--------------------------------+-------------------------------+
| PERSISTENT DATA     | PERSISTENT_DATA_BASE      | __stack_lma__ & ~0xfff         | SECTION_NUM * SECTION_SIZE    |
|                     | (Aligned to 4KB Boundary) |                                | ( Default 12KB)               |
+---------------------+---------------------------+--------------------------------+-------------------------------+
| IMAGE and OTA IMAGE | IMAGE_START               | PERSISTENT_DATA_BASE           |                               |
|                     | (Aligned to 4KB Boundary) |                                |                               |
+---------------------+---------------------------+--------------------------------+-------------------------------+
| SECOND BOOTLOADER   | 0x1000                    | SECOND_BOOTLOADER_END          |                               |
+---------------------+---------------------------+--------------------------------+-------------------------------+
| INFORMATION         | 0x0                       | 0x1000                         | 4KB                           |
+---------------------+---------------------------+--------------------------------+-------------------------------+

SRAM
-------

+---------------------+------------------------+---------------+---------------+
| Runtime Section     | Start Address          | End Address   | Size          |
+=====================+========================+===============+===============+
| BLE PROTOCOL DATA   | Stack_Top              | 0xC000        |               |
+---------------------+------------------------+---------------+---------------+
| APP STACK           | Stack_Top - Stack_Size | Stack_Top     |               |
+---------------------+------------------------+---------------+---------------+
| APP HEAP            |                        |               |               |
+---------------------+------------------------+---------------+---------------+
| APP RESET_REATIN    |                        |               |               |
+---------------------+------------------------+---------------+---------------+
| APP BSS             |                        |               |               |
+---------------------+------------------------+---------------+---------------+
| APP DATA            |                        |               |               |
+---------------------+                        |               |               |
| APP XIP_BANNED      | 0xc0                   | __data_end__  |               |
+---------------------+------------------------+---------------+---------------+
| APP ISR_VECTOR      | 0x0                    | 0xC0          |               |
+---------------------+------------------------+---------------+---------------+